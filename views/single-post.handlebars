{{#with post}}
    <section class='post no-float'>
        <div class='post-header'>
            <h2 class='post-title'>{{title}}</h2>

            <span class='post-author'><a href='/users/{{user.id}}'>{{user.username}}</a></span>

            <span>{{format_date created_at}}</span>
        </div>

        <div class='post-text'>
            {{text}}
        </div>
    </section>
{{/with}}

{{#if loggedIn}}
    <form id="comment-form" class="comment-form flex flex-col">
        <h3 class='form-title'>Leave a comment?</h3>

        <textarea id='comment_text' placeholder='Comment text...'></textarea>

        <button type="submit">Submit</button>
    </form>
{{/if}}

{{#with post}}
    <section class='comment-section'>
        {{#if comments.length}}
            {{#each comments as |c|}}
                <div class="comment">
                    <p class='comment-header'>
                        {{c.user.username}}
                        said on
                        {{format_date created_at}}:
                    </p>

                    <p class='comment-body'>
                        {{c.comment_text}}
                    </p>
                </div>
            {{/each}}
        {{else}}
            <p>There are no comments on this post.</p>
        {{/if}}
    </section>
{{/with}}

{{#if loggedIn}}
    <script src="/js/comment.js"></script>
{{/if}}